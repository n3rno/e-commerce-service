<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.hhplus.be.server.order.repository.OrderDao">

    <insert id="insertOrder" parameterType="Order">
        INSERT INTO order (
            id,
            user_no,
            total_order_amount,
            coupon_issue_no,
            created_at
        ) values (
            #{id},
            #{userNo},
            #{totalOrderAmount},
            #{couponIssueNo},
            NOW(),
        )
    </insert>

    <insert id="insertOrderGoods" parameterType="list">
        INSERT INTO order_goods (
            order_id,
            goods_no,
            quantity,
            created_at
        ) values
        <foreach collection="list" item="item" separator=",">
        (
            #{item.orderId},
            #{item.goodsNo},
            #{item.quantity},
            NOW()
        )
        </foreach>
    </insert>

</mapper>
